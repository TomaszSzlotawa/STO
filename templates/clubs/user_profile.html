{% extends 'clubs/main.html' %}

{% block title %}Profil użytkownika {{user.username}}{% endblock %}
{% block header %}Profil użytkownika {{user.username}}{% endblock %}

{% block content %}
<div class="container dashboard">
    
        <div class="row ">
            <div class="col-md-4 mb-3">
                <div class="row">
                    <div class="card mb-3">
                        <div class="card-body">
                          <div class="d-flex flex-column align-items-center text-center">
                            <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
                            <div class="mt-3">
                              <h4>{{user.first_name}} {{user.last_name}}</h4>
                              <p class="text-secondary mb-1">{{user.username}}</p>
                              <p class="text-muted font-size-sm">{{user.email}}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                </div>
                <div class="row">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="d-flex align-items-center mb-3 fw-bolder">Zmiana hasła</h4>
                            
                            <form method="POST" class="user-profil">
                                {% csrf_token %}
                                <div class="row">
                                    <label for="{{password_form.old_password.id_for_label}}" class="col-sm-6 col-form-label">Aktualne hasło</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="password" name="{{password_form.old_password.name}}" autocomplete="current-password" autofocus="" required="" id="{{password_form.old_password.id_for_label}}">
                                        {% for error in password_form.old_password.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <hr>
                                <div class="row mb-1">
                                    <label for="{{password_form.new_password1.id_for_label}}" class="col-sm-6 col-form-label">Nowe hasło</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="password" name="{{password_form.new_password1.name}}" autocomplete="new-password" required="" id="{{password_form.new_password1.id_for_label}}">
                                        {% for error in password_form.new_password1.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="row">
                                    <label for="{{password_form.new_password2.id_for_label}}" class="col-sm-6 col-form-label">Powtórz nowe hasło</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="password" name="{{password_form.new_password2.name}}" autocomplete="new-password" required="" id="{{password_form.new_password2.id_for_label}}">
                                        {% for error in password_form.new_password2.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="d-flex justify-content-end">
                                        <input name="password-submit" type="submit" class="btn my-2" value="Zapisz">
                                    </div>
                                </div>
                            </form>
                          
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card mb-3">
                    <div class="card-body">
                        <form method="POST" class="user-profil data">
                            {% csrf_token %}
                            <div class="row">
                                <label for="{{user_form.username.id_for_label}}" class="col-sm-3 col-form-label">Nazwa użytkownika</label>
                                <div class="col-sm-9">
                                    <input  class="form-control" type="text" name="{{user_form.username.name}}" value="{{user_form.username.value}}" maxlength="150" required="" id="{{user_form.username.id_for_label}}">
                                    {% for error in user_form.username.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <label for="{{user_form.first_name.id_for_label}}" class="col-sm-3 col-form-label">Imię</label>
                                <div class="col-sm-9">
                                    <input  class="form-control" type="text" name="{{user_form.first_name.name}}" value="{{user_form.first_name.value}}" maxlength="150" required="" id="{{user_form.first_name.id_for_label}}">
                                    {% for error in user_form.first_name.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <label for="{{user_form.last_name.id_for_label}}" class="col-sm-3 col-form-label">Nazwisko</label>
                                <div class="col-sm-9">
                                    <input  class="form-control" type="text" name="{{user_form.last_name.name}}" value="{{user_form.last_name.value}}" maxlength="150" required="" id="{{user_form.last_name.id_for_label}}">
                                    {% for error in user_form.last_name.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <label for="{{profile_form.birth_date.id_for_label}}" class="col-sm-3 col-form-label">Data urodzin</label>
                                <div class="col-sm-3">
                                    {{profile_form.birth_date}}
                                    {% for error in profile_form.birth_date.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <label for="{{profile_form.license.id_for_label}}" class="col-sm-3 col-form-label">Licencja</label>
                                <div class="col-sm-3">
                                    {{ profile_form.license}}  
                                    {% for error in profile_form.license.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}                          
                                </div>
                                <label for="{{profile_form.license_expiry_date.id_for_label}}" class="col-sm-3 col-form-label">Data wygaśnięcia</label>
                                <div class="col-sm-3">
                                    {{profile_form.license_expiry_date}}
                                    {% for error in profile_form.license_expiry_date.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}     
                                </div>
                            </div>
                            <hr>
                                
                            <div class="row">
                                <div class="col-sm-12">
                                    <input name="data-submit" type="submit" class="btn " value="Zapisz">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-4 col-lg-4 col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header py-3 d-flex flex-row justify-content-between">
                                <h6 class="m-0 text-uppercase"><i class="fa-solid fa-briefcase"> &nbsp;</i> TWOJE ROLE</h6>
                                <a class="text-decoration-none" href="{% url 'user_roles' %}"> <h6 class="m-0"><i class="fa-solid fa-pen"></i></h6> </a>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p class="mb-0 f-w-600">Administrator</p>
                                        {% for club in usersClubs %}
                                        {% if club.admin%}
                                        <h6 class="text-muted f-w-400 m-0 p-0">{{club.club.name}}</h6>
                                        {% endif %}
                                        {% endfor %}
                
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="mb-0 f-w-600">Koordynator szkolenia</p>
                                        {% for club in usersClubs %}
                                        {% if club.training_coordinator%}
                                        <h6 class="text-muted f-w-400 m-0 p-0">{{club.club.name}}</h6>
                                        {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p class="mb-0 f-w-600">Trener</p>
                                        {% for club in usersClubs %}
                                        {% if club.coach%}
                                        <h6 class="text-muted f-w-400 ">{{club.club.name}}</h6>
                                        {% endif %}
                                        {% endfor %}
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="mb-0 f-w-600">Pracownik administracji klubowej</p>
                                        {% for club in usersClubs %}
                                        {% if club.employee%}
                                        <h6 class="text-muted f-w-400 ">{{club.club.name}}</h6>
                                        {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-4 col-md-6 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center links">
                                    <a class=" fw-bolder text-uppercase py-2 mx-1 d-flex" href="{% url 'delete_profile' %}">
    
                                    <div class="col mr-2">
                                            USUŃ KONTO
                                    </div>
                                    <div class="col-auto">
                                        <i class="fa-solid fa-trash mr-2"></i>
                                    </div>
                                    </a>
                                    <a class=" fw-bolder text-uppercase py-2 mt-2 mx-1 d-flex" href="{% url 'user_panel' %}">
    
                                        <div class="col mr-2">
                                                Wróć do panelu użytkownika
                                        </div>
                                        <div class="col-auto">
                                            <i class="fa-solid fa-arrow-left mr-2"></i>
                                        </div>
                                        </a>
                                    
    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                                
            </div>
        </div>

    </div>


{% endblock %}